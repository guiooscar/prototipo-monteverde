<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Inicio - Colegio MonteVerde</title>
  <link rel="stylesheet" href="../assets/css/base.css" />
  <link rel="stylesheet" href="../assets/css/layout.css" />
  <link rel="stylesheet" href="../assets/css/components.css" />
  <link rel="stylesheet" href="../assets/css/roles.css" />
</head>
<body>
  <!-- Header comÃºn -->
  <div id="header-placeholder"></div>

  <div class="layout-container">
    <!-- Sidebar docente -->
    <aside id="sidebar-placeholder"></aside>

    <main class="main-content">
      <h1>Bienvenido, MarÃ­a R.</h1>
      <p class="subtitle">AquÃ­ tienes un resumen de tus cursos y tareas pendientes.</p>

      <div class="dashboard-grid">
        <!-- Tarjeta: Cursos a cargo -->
        <div class="card">
          <h3>Tus Cursos</h3>
          <ul id="lista-cursos">
            <li>7Â°B â€“ MatemÃ¡ticas (28 estudiantes)</li>
            <li>8Â°A â€“ MatemÃ¡ticas (30 estudiantes)</li>
            <li>8Â°A â€“ Ciencias Naturales (30 estudiantes)</li>
          </ul>
          <a href="calificaciones.html" class="btn-small">Ir a gestiÃ³n acadÃ©mica</a>
        </div>

        <!-- Tarjeta: Tareas pendientes -->
        <div class="card">
          <h3>Tareas Pendientes</h3>
          <ul id="tareas-pendientes">
            <li>ğŸ“… Registrar asistencia - 7Â°B - <strong>hoy</strong></li>
            <li>ğŸ“ Calificar tareas de 8Â°A - MatemÃ¡ticas (vence hoy)</li>
            <li>ğŸ“¤ Enviar boletines - 2025-P2 (prÃ³ximamente)</li>
          </ul>
        </div>

        <!-- Tarjeta: Ãšltimo mensaje -->
        <div class="card">
          <h3>Ãšltimo Mensaje</h3>
          <strong id="mensaje-de">Familia de Carlos PÃ©rez</strong>
          <p id="mensaje-asunto">Consulta sobre tarea no entregada</p>
          <small>Recibido hoy</small>
          <a href="mensajes.html" class="btn-small">Responder</a>
        </div>

        <!-- Tarjeta: Accesos rÃ¡pidos -->
        <div class="card">
          <h3>Accesos RÃ¡pidos</h3>
          <div class="quick-links">
            <a href="calificaciones.html" class="btn-link">ğŸ“ Gestionar Calificaciones</a>
            <a href="asistencia.html" class="btn-link">âœ… Registrar Asistencia</a>
            <a href="observador.html" class="btn-link">ğŸ“Œ Registrar ObservaciÃ³n</a>
            <a href="mensajes.html" class="btn-link">ğŸ’¬ MensajerÃ­a</a>
          </div>
        </div>
      </div>

      <!-- Notificaciones generales -->
      <section class="announcements">
        <h2>Notificaciones del Colegio</h2>
        <ul>
          <li><strong>10/09:</strong> ReuniÃ³n general de docentes a las 4:00 PM.</li>
          <li><strong>15/09:</strong> Entrega de boletines acadÃ©micos (P2).</li>
          <li><strong>20/09:</strong> Salida pedagÃ³gica del grupo 8Â°A.</li>
        </ul>
      </section>
    </main>
  </div>

  <script type="module">
    import { DATA } from '../assets/js/mock-data.js';
    import { loadHeader, loadSidebar } from '../assets/js/app.js';

    console.log("âœ… DATA cargada en dashboard.html:", DATA);

    // Cargar header y sidebar
    await loadHeader('../parciales/header.html', 'MarÃ­a R. (Docente)');
    await loadSidebar('../parciales/sidebar-docente.html', 'dashboard.html');

    const listaCursos = document.getElementById('lista-cursos');
    const tareasPendientes = document.getElementById('tareas-pendientes');
    const mensajeDe = document.getElementById('mensaje-de');
    const mensajeAsunto = document.getElementById('mensaje-asunto');

    // === Mostrar cursos a cargo ===
    listaCursos.innerHTML = '';
    const cursosDocente = DATA.cursos.filter(c => c.id.includes('MAT') || c.id.includes('CIE'));
    cursosDocente.forEach(curso => {
      const li = document.createElement('li');
      li.textContent = `${curso.nombre} (${curso.id.startsWith('7') ? '28' : '30'} estudiantes)`;
      listaCursos.appendChild(li);
    });

    // === Mostrar tareas pendientes ===
    // (SimulaciÃ³n estÃ¡tica, pero se puede dinamizar con mÃ¡s datos)
    tareasPendientes.innerHTML = `
      <li>ğŸ“… Registrar asistencia - 7Â°B - <strong>hoy</strong></li>
      <li>ğŸ“ Calificar tareas de 8Â°A - MatemÃ¡ticas (vence hoy)</li>
      <li>ğŸ“¤ Enviar boletines - 2025-P2 (prÃ³ximamente)</li>
    `;

    // === Mostrar Ãºltimo mensaje ===
    if (DATA.mensajes.length > 0) {
      const ultimoMsg = DATA.mensajes[DATA.mensajes.length - 1];
      mensajeDe.textContent = ultimoMsg.de;
      mensajeAsunto.textContent = ultimoMsg.asunto;
    }
  </script>
</body>
</html>